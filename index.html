<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IA Black ‚Ä¢ Protocolo</title>
  <meta name="description" content="Protocolo Black ‚Äî intro + quiz com XP, efeito matrix, preserva UTMs e envia respostas ao checkout." />

  <!-- FONTE (pode remover se j√° usa outra) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600..900&display=swap" rel="stylesheet">

  <style>
    :root{
      --neon:#15ff95;
      --neon2:#07b67a;
      --border:#0aa967;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Orbitron",system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;
      background:#000;
      color:#e8fff4;
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* ===== fundo matrix */
    canvas#matrix{
      position:fixed; inset:0; width:100%; height:100%;
      z-index:-1; background:#000;
    }

    /* ===== HUD XP/LVL */
    #hud{
      position:fixed; top:14px; left:50%; transform:translateX(-50%);
      display:inline-flex; gap:10px; align-items:center;
      padding:8px 16px; font-size:13px; font-weight:800; letter-spacing:.06em;
      color:var(--neon);
      background:rgba(0,0,0,.55);
      border:1px solid rgba(21,255,149,.32);
      border-radius:12px;
      box-shadow:0 0 8px rgba(21,255,149,.25);
      backdrop-filter: blur(4px);
    }

    /* ===== se√ß√£o inicial */
    .hero{
      display:grid; place-items:center;
      min-height:70svh; padding:64px 20px 16px;
      text-align:center;
    }
    .hero h1{
      font-size: clamp(28px,6vw,56px);
      color:var(--neon);
      margin:0 0 14px;
      text-shadow:
        0 0 8px rgba(21,255,149,.35),
        0 0 16px rgba(21,255,149,.25);
      letter-spacing:.06em; font-weight:900;
    }
    .hero p{opacity:.9; margin:0 0 26px; font-size:clamp(14px,3.8vw,18px)}

    /* ===== bot√µes */
    .btn{
      appearance:none; border:1px solid var(--border);
      background: var(--neon); color:#000; /* letras pretas */
      border-radius:18px; padding:14px 22px; font-weight:900;
      text-transform:uppercase; letter-spacing:.08em; cursor:pointer;
      box-shadow:0 0 14px rgba(21,255,149,.35);
      transition:transform .15s, filter .15s;
    }
    .btn:hover{ filter:brightness(1.06); transform:translateY(-1px) }
    .btn:active{ transform:translateY(0) }

    /* ===== container das perguntas */
    .card{
      max-width:720px; margin:24px auto; padding:22px 18px;
      background:rgba(0,0,0,.72);
      border:1px solid rgba(21,255,149,.22);
      border-radius:18px;
      box-shadow:0 12px 28px rgba(0,0,0,.55);
    }
    .card h3{
      margin:4px 0 14px;
      color:var(--neon); text-shadow:0 0 6px rgba(21,255,149,.4);
      font-size:clamp(18px,5vw,24px);
    }

    /* ===== op√ß√µes: VERDE NEON + TEXTO PRETO (pedido) */
    .answer{
      display:block; width:100%; text-align:center; cursor:pointer;
      margin:10px 0; padding:14px 16px; border-radius:14px;
      background:#15ff95;              /* verde neon s√≥lido (leg√≠vel) */
      color:#000; font-weight:900;      /* letras pretas fortes */
      border:1px solid var(--border);
      box-shadow: 0 2px 0 #0aa967 inset, 0 0 10px rgba(21,255,149,.22);
      text-shadow:none;                 /* sem brilho no texto preto */
      transition:transform .12s, filter .12s;
    }
    .answer:hover{ filter:brightness(1.05); transform:translateY(-1px) }

    /* navega√ß√£o da etapa */
    .nav{
      display:flex; justify-content:space-between; margin-top:8px;
      font-size:13px; color:rgba(255,255,255,.7);
    }
    .nav button{
      background:none; border:none; color:rgba(255,255,255,.7);
      text-decoration:underline; cursor:pointer; padding:6px 8px;
    }
    .nav button[disabled]{opacity:.35; pointer-events:none}

    /* pequenos utilit√°rios */
    .hidden{ display:none !important }
    footer{ text-align:center; color:#8ddfbc; opacity:.45; padding:40px 0 60px; font-size:12px }
  </style>

  <!-- Meta Pixel b√°sico (opcional): ?pixel=ID ou troque o REPLACE -->
  <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');
    (function(){const q=new URLSearchParams(location.search);const PIXEL=q.get('pixel')||'REPLACE_WITH_PIXEL_ID'; try{fbq('init',PIXEL);fbq('track','PageView');}catch(e){}})();
  </script>
</head>
<body>
  <!-- fundo matrix -->
  <canvas id="matrix"></canvas>

  <!-- HUD -->
  <div id="hud"><span id="xp">0 XP</span>&nbsp;|&nbsp;<span id="lvl">LVL 1</span></div>

  <!-- TELA INICIAL -->
  <section id="intro" class="hero">
    <div class="card" style="background:rgba(0,0,0,.62)">
      <h1>INICIANDO PROTOCOLO BLACK...</h1>
      <p>Sistema carregado. Pressione para continuar.</p>
      <button id="startBtn" class="btn">Iniciar Protocolo</button>
    </div>
  </section>

  <!-- QUIZ -->
  <form id="quiz" class="hidden" autocomplete="off">
    <div class="card" data-step="0">
      <h3>Qual seu principal objetivo agora?</h3>
      <button type="button" class="answer" data-a="Renda extra imediata">Renda extra imediata</button>
      <button type="button" class="answer" data-a="Estruturar vendas no sigilo">Estruturar vendas no sigilo</button>
      <button type="button" class="answer" data-a="Validar um produto">Validar um produto</button>
      <button type="button" class="answer" data-a="Escalar o que j√° vende">Escalar o que j√° vende</button>
      <div class="nav"><button type="button" class="prev" disabled>Voltar</button><button type="button" class="skip">Pular</button></div>
    </div>

    <div class="card hidden" data-step="1">
      <h3>Seu n√≠vel hoje?</h3>
      <button type="button" class="answer" data-a="Iniciante">Iniciante</button>
      <button type="button" class="answer" data-a="Intermedi√°rio">Intermedi√°rio</button>
      <button type="button" class="answer" data-a="Avan√ßado">Avan√ßado</button>
      <div class="nav"><button type="button" class="prev">Voltar</button><button type="button" class="skip">Pular</button></div>
    </div>

    <div class="card hidden" data-step="2">
      <h3>Quanto tempo por dia voc√™ tem?</h3>
      <button type="button" class="answer" data-a="< 1h">&lt; 1h</button>
      <button type="button" class="answer" data-a="1‚Äì2h">1‚Äì2h</button>
      <button type="button" class="answer" data-a="3h+">3h+</button>
      <div class="nav"><button type="button" class="prev">Voltar</button><button type="button" class="skip">Pular</button></div>
    </div>

    <div class="card hidden" data-step="3">
      <h3>Quer aparecer nos conte√∫dos?</h3>
      <button type="button" class="answer" data-a="N√£o, zero exposi√ß√£o">N√£o, zero exposi√ß√£o</button>
      <button type="button" class="answer" data-a="Talvez, pouco">Talvez, pouco</button>
      <button type="button" class="answer" data-a="Sim, sem problemas">Sim, sem problemas</button>
      <div class="nav"><button type="button" class="prev">Voltar</button><button type="button" class="skip">Pular</button></div>
    </div>

    <div class="card hidden" data-step="4">
      <h3>Qual or√ßamento para iniciar?</h3>
      <button type="button" class="answer" data-a="R$0 a R$10/dia">R$0 a R$10/dia</button>
      <button type="button" class="answer" data-a="R$10 a R$30/dia">R$10 a R$30/dia</button>
      <button type="button" class="answer" data-a="R$30+/dia">R$30+/dia</button>
      <div class="nav"><button type="button" class="prev">Voltar</button><button type="button" class="skip">Pular</button></div>
    </div>

    <!-- lead/cta final -->
    <div class="card hidden" data-step="5" id="lead">
      <h3>Quase l√°! Para liberar seu acesso üëá</h3>
      <div style="display:grid; gap:10px; grid-template-columns:1fr; max-width:520px; margin:10px auto 0">
        <input id="nome" placeholder="Seu nome (opcional)" style="background:#071a12;color:#eafff4;border:1px solid #0a3; padding:12px 14px;border-radius:12px">
        <input id="whats" placeholder="Seu WhatsApp (opcional)" style="background:#071a12;color:#eafff4;border:1px solid #0a3; padding:12px 14px;border-radius:12px">
      </div>
      <button type="button" id="finishBtn" class="btn" style="margin-top:12px">Liberar acesso</button>
      <div class="nav" style="justify-content:center"><button type="button" class="prev">Voltar</button></div>
    </div>
  </form>

  <footer>¬© <span id="year"></span> IA Black</footer>

  <script>
    /* ===== efeito matrix ===== */
    (function(){
      const c=document.getElementById('matrix'),x=c.getContext('2d');
      function size(){ c.width=innerWidth; c.height=innerHeight; cols=Math.ceil(c.width/font); drops=Array(cols).fill(1); }
      let font=14, cols=0, drops=[];
      size(); addEventListener('resize', size);
      const letters="ÔΩ±ÔΩ∂ÔΩªÔæÄÔæÖÔæäÔæèÔæîÔæóÔæú0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".split('');
      function draw(){
        x.fillStyle="rgba(0,0,0,0.08)"; x.fillRect(0,0,c.width,c.height);
        x.fillStyle="#0f0"; x.font=font+"px monospace";
        for(let i=0;i<drops.length;i++){
          const t=letters[Math.random()*letters.length|0];
          x.fillText(t,i*font,drops[i]*font);
          if(drops[i]*font>c.height && Math.random()>0.975) drops[i]=0;
          drops[i]++;
        }
      }
      setInterval(draw,40);
    })();

    /* ===== estado/√∫teis ===== */
    const DESTINO_CHECKOUT='https://go.pepperpay.com.br/hb90b'; // seu checkout
    const keepParams=['utm_source','utm_medium','utm_campaign','utm_content','utm_term','utm_id','fbclid'];
    const params=new URLSearchParams(location.search);
    const answers={}; let step=0, xp=0, lvl=1;

    const $=s=>document.querySelector(s);
    const $$=s=>document.querySelectorAll(s);
    const toSlug=t=>t.normalize('NFD').replace(/[^\w\s-]/g,'').trim().replace(/\s+/g,'-').toLowerCase();
    function addXP(n){ xp+=n; if(xp>=lvl*100){ lvl++; } $('#xp').textContent=`${xp} XP`; $('#lvl').textContent=`LVL ${lvl}`; }

    /* ===== sfx (som de clique) ===== */
    let AC; function unlockAudio(){ if(!AC){ const C=window.AudioContext||window.webkitAudioContext; if(C) AC=new C(); } }
    function sfx(){ if(!AC) return; const t=AC.currentTime; const o=AC.createOscillator(), g=AC.createGain();
      o.type='square'; o.frequency.setValueAtTime(700,t);
      g.gain.setValueAtTime(0.0001,t); g.gain.exponentialRampToValueAtTime(0.08,t+0.01);
      g.gain.exponentialRampToValueAtTime(0.0001,t+0.09); o.connect(g).connect(AC.destination);
      o.start(t); o.stop(t+0.10);
    }
    document.addEventListener('click', e=>{ if(e.target.closest('.sfx')) sfx(); }, true);

    /* ===== fluxo ===== */
    $('#startBtn').addEventListener('click', ()=>{
      unlockAudio(); sfx();
      $('#intro').classList.add('hidden');
      $('#quiz').classList.remove('hidden');
      addXP(100); // b√¥nus de in√≠cio
      try{ fbq('trackCustom','StartQuiz'); }catch(e){}
      showStep(0);
    });

    function showStep(i){
      step=i;
      const cards=$$('#quiz .card');
      cards.forEach((el,idx)=> el.classList.toggle('hidden', idx!==i));
      if(i===cards.length-1){ $('#nome').focus(); }
    }

    document.addEventListener('click', (e)=>{
      // resposta
      const btn=e.target.closest('.answer');
      if(btn){
        const card=btn.closest('.card'); const i=+card.dataset.step;
        const ids=['objetivo','experiencia','tempo','exposicao','orcamento'];
        if(ids[i]) answers[ids[i]]=btn.dataset.a||btn.textContent.trim();
        addXP(50);
        try{ fbq('trackCustom','AnswerQuestion',{step:i,answer:btn.dataset.a}); }catch(_){}
        showStep(Math.min(step+1, 5));
      }
      // navega√ß√£o
      if(e.target.matches('.prev')) showStep(Math.max(step-1,0));
      if(e.target.matches('.skip')) showStep(Math.min(step+1,5));
      // finalizar
      if(e.target.matches('#finishBtn')) finalizar();
    });

    function finalizar(){
      const nome=$('#nome').value.trim(); const whats=$('#whats').value.trim();
      const url=new URL(DESTINO_CHECKOUT);
      keepParams.forEach(k=>{ if(params.get(k)) url.searchParams.set(k, params.get(k)); });
      Object.entries({nome,whats,...answers}).forEach(([k,v])=>{
        if(v) url.searchParams.set('q_'+toSlug(k), toSlug(String(v)));
      });
      try{ fbq('track','Lead'); fbq('trackCustom','SubmitQuiz', {nome,whats,...answers}); }catch(_){}
      location.href=url.toString();
    }

    document.getElementById('year').textContent=new Date().getFullYear();
  </script>
</body>
</html>
