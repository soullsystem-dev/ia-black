<!doctype html>
<html lang="pt-br">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>IA Black ‚Äî Protocolo + Quiz</title>
<meta name="description" content="Tela 'Iniciando Protocolo Black' com Matrix animado, HUD XP/Level e quiz com pontos.">

<!-- Fontes -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;800;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<style>
  :root{--neon:#15ff95;--neon2:#0bd47a;--bg:#050505;--glass:rgba(255,255,255,.06);--border:rgba(21,255,149,.22)}
  html,body{height:100%}
  body{background:var(--bg);color:#eafff4;font-family:"Share Tech Mono",ui-monospace,monospace;letter-spacing:.2px;overflow-x:hidden}
  /* HUD */
  .hud-pill{border:1px solid var(--border);background:rgba(21,255,149,.08);border-radius:999px;backdrop-filter:blur(10px)}
  /* Bot√µes */
  .btn{background:linear-gradient(90deg,var(--neon),var(--neon2));color:#032818;border-radius:18px;font-weight:900;letter-spacing:.08em;
       box-shadow:0 0 40px rgba(21,255,149,.35);transition:transform .12s,filter .12s}
  .btn:hover{filter:brightness(1.05);transform:translateY(-1px)}
  .ghost{background:rgba(0,0,0,.55);border:1px solid var(--border);border-radius:14px;text-align:left}
  .ghost:active{background:rgba(21,255,149,.1)}
  /* Cart√µes */
  .glass{background:var(--glass);border:1px solid var(--border);box-shadow:0 0 0 1px rgba(21,255,149,.1),0 10px 30px rgba(0,0,0,.6),inset 0 0 30px rgba(21,255,149,.06);border-radius:24px}
  /* T√≠tulos hero */
  .hero{font-family:"Orbitron",sans-serif; font-weight:900; letter-spacing:.06em;
        text-shadow:0 0 24px rgba(21,255,149,.35)}
  /* Barra progresso */
  .bar{height:8px;background:#0b0b0b;border:1px solid rgba(255,255,255,.12);border-radius:999px;overflow:hidden}
  .bar>i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--neon),var(--neon2))}
  /* Badge XP que aparece animado */
  .xp-float{position:fixed;right:16px;top:70px;background:linear-gradient(90deg,var(--neon),var(--neon2));
            color:#032818;font-weight:900;border-radius:12px;padding:.4rem .7rem;opacity:0;transform:translateY(-10px);
            box-shadow:0 0 30px rgba(21,255,149,.35);transition:opacity .2s, transform .2s}
  .xp-float.show{opacity:1;transform:translateY(0)}
  /* Esconder r√°pido */
  .hidden{display:none!important}
</style>

<!-- Pixel (protegido) -->
<script>
  try{
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script','https://connect.facebook.net/en_US/fbevents.js');
    (function(){const q=new URLSearchParams(location.search);const PIXEL=q.get('pixel')||'REPLACE_WITH_PIXEL_ID';fbq('init',PIXEL);fbq('track','PageView')})();
  }catch(e){}
</script>
</head>
<body>
<!-- Canvas da ‚Äúchuva‚Äù Matrix -->
<canvas id="matrix" style="position:fixed;inset:0;z-index:-1;"></canvas>

<!-- HUD -->
<header class="sticky top-0 z-30 backdrop-blur bg-black/60 border-b border-white/10">
  <div class="max-w-xl mx-auto px-4 py-3 flex items-center justify-between">
    <div class="hud-pill px-3 py-1 text-xs">IA BLACK ‚Ä¢ PROTOCOLO</div>
    <div class="hud-pill px-3 py-1 text-xs flex items-center gap-2">
      <span id="xpHud">0 XP</span><span class="opacity-50">|</span><span id="lvlHud">LVL 1</span>
    </div>
  </div>
</header>

<!-- Badge XP flutuante -->
<div id="xpFloat" class="xp-float">+50 XP</div>

<main class="max-w-xl mx-auto px-4 py-8">
  <!-- TELA 1 ‚Äî Protocolo -->
  <section id="protocolo" class="glass p-6 md:p-10">
    <div class="text-center space-y-6">
      <div class="hud-pill inline-block px-3 py-1 text-[11px]">SISTEMA ONLINE</div>
      <h1 class="hero text-3xl sm:text-4xl md:text-5xl leading-tight">INICIANDO PROTOCOLO<br>BLACK‚Ä¶</h1>
      <div class="ghost p-4 text-[15px] sm:text-base">Sistema carregado. Pressione para continuar.</div>
      <button class="btn w-full py-4 text-lg" onclick="iniciarProtocolo()">INICIAR PROTOCOLO</button>
    </div>
  </section>

  <!-- QUIZ -->
  <form id="quiz" class="hidden mt-6 space-y-6">
    <div class="glass p-6">
      <div class="flex items-center justify-between mb-4">
        <span class="hud-pill px-3 py-1 text-[11px]">DIAGN√ìSTICO ‚Ä¢ <b id="stepLabel">1/5</b></span>
      </div>
      <div class="bar mb-5"><i id="bar"></i></div>

      <!-- perguntas -->
      <div id="q1" class="space-y-3">
        <h3 class="text-emerald-300">Qual seu principal objetivo agora?</h3>
        <div class="grid gap-3">
          <button type="button" class="ghost px-4 py-3" onclick="choose('objetivo','Renda extra imediata')">Renda extra imediata</button>
          <button type="button" class="ghost px-4 py-3" onclick="choose('objetivo','Estruturar vendas no sigilo')">Estruturar vendas no sigilo</button>
          <button type="button" class="ghost px-4 py-3" onclick="choose('objetivo','Validar um produto')">Validar um produto</button>
          <button type="button" class="ghost px-4 py-3" onclick="choose('objetivo','Escalar o que j√° vende')">Escalar o que j√° vende</button>
        </div>
      </div>

      <div id="q2" class="space-y-3 hidden">
        <h3 class="text-emerald-300">Seu n√≠vel hoje?</h3>
        <div class="grid gap-3">
          <button type="button" class="ghost px-4 py-3" onclick="choose('experiencia','Iniciante')">Iniciante</button>
          <button type="button" class="ghost px-4 py-3" onclick="choose('experiencia','Intermedi√°rio')">Intermedi√°rio</button>
          <button type="button" class="ghost px-4 py-3" onclick="choose('experiencia','Avan√ßado')">Avan√ßado</button>
        </div>
      </div>

      <div id="q3" class="space-y-3 hidden">
        <h3 class="text-emerald-300">Quanto tempo por dia voc√™ tem?</h3>
        <div class="grid gap-3">
          <button type="button" class="ghost px-4 py-3" onclick="choose('tempo','< 1h')">&lt; 1h</button>
          <button type="button" class="ghost px-4 py-3" onclick="choose('tempo','1‚Äì2h')">1‚Äì2h</button>
          <button type="button" class="ghost px-4 py-3" onclick="choose('tempo','3h+')">3h+</button>
        </div>
      </div>

      <div id="q4" class="space-y-3 hidden">
        <h3 class="text-emerald-300">Quer aparecer nos conte√∫dos?</h3>
        <div class="grid gap-3">
          <button type="button" class="ghost px-4 py-3" onclick="choose('exposicao','N√£o, zero exposi√ß√£o')">N√£o, zero exposi√ß√£o</button>
          <button type="button" class="ghost px-4 py-3" onclick="choose('exposicao','Talvez, pouco')">Talvez, pouco</button>
          <button type="button" class="ghost px-4 py-3" onclick="choose('exposicao','Sim, sem problemas')">Sim, sem problemas</button>
        </div>
      </div>

      <div id="q5" class="space-y-3 hidden">
        <h3 class="text-emerald-300">Qual or√ßamento para iniciar?</h3>
        <div class="grid gap-3">
          <button type="button" class="ghost px-4 py-3" onclick="choose('orcamento','R$0 a R$10/dia')">R$0 a R$10/dia</button>
          <button type="button" class="ghost px-4 py-3" onclick="choose('orcamento','R$10 a R$30/dia')">R$10 a R$30/dia</button>
          <button type="button" class="ghost px-4 py-3" onclick="choose('orcamento','R$30+/dia')">R$30+/dia</button>
        </div>
      </div>

      <div class="mt-4 flex justify-between text-xs text-white/60">
        <button type="button" class="underline" onclick="prev()">Voltar</button>
        <button type="button" class="underline" onclick="skip()">Pular</button>
      </div>
    </div>
  </form>

  <!-- LEAD -->
  <section id="lead" class="hidden mt-6 glass p-6 space-y-4">
    <h3 class="font-bold">Quase l√°! Libere seu acesso üëá</h3>
    <div class="grid sm:grid-cols-2 gap-3">
      <input id="nome" class="w-full rounded-xl bg-black/40 border border-white/10 px-4 py-3" placeholder="Seu nome (opcional)">
      <input id="whats" class="w-full rounded-xl bg-black/40 border border-white/10 px-4 py-3" placeholder="Seu WhatsApp (opcional)">
    </div>
    <button class="btn w-full py-4 text-lg" onclick="finalizar()">CONTINUAR</button>
    <p class="text-[11px] text-white/50">Ao continuar, voc√™ concorda com a pol√≠tica de privacidade.</p>
  </section>
</main>

<footer class="py-10 text-center text-[11px] text-white/40">¬© <span id="year"></span> IA Black</footer>

<script>
/* ====== Config ====== */
const DESTINO_CHECKOUT='https://go.pepperpay.com.br/hb90b';
const params=new URLSearchParams(location.search);
const keepParams=['utm_source','utm_medium','utm_campaign','utm_content','utm_term','utm_id','fbclid'];

/* ====== XP / Level ====== */
let XP=0, LVL=1;
const XP_PER_LEVEL=200;     // mude aqui se quiser upar mais r√°pido
const XP_ON_START=100;      // +100 ao iniciar protocolo
const XP_PER_ANSWER=50;     // +50 por resposta
function addXP(qty){
  XP+=qty;
  // level up
  const newLvl=Math.max(1, Math.floor(XP/XP_PER_LEVEL)+1);
  if(newLvl!==LVL){ LVL=newLvl; }
  // HUD
  document.getElementById('xpHud').textContent=`${XP} XP`;
  document.getElementById('lvlHud').textContent=`LVL ${LVL}`;
  // badge flutuante
  const b=document.getElementById('xpFloat');
  b.textContent=`+${qty} XP`;
  b.classList.add('show');
  setTimeout(()=>b.classList.remove('show'), 900);
}

/* ====== √Åudio ====== */
let AC; function ensureAudio(){ if(!AC){ const C=window.AudioContext||window.webkitAudioContext; if(C){ AC=new C(); } } }
function beep(f=720,d=0.1){ try{ if(!AC) return; const t=AC.currentTime,o=AC.createOscillator(),g=AC.createGain(); o.type='square'; o.frequency.setValueAtTime(f,t); g.gain.setValueAtTime(0.0001,t); g.gain.exponentialRampToValueAtTime(0.06,t+0.01); g.gain.exponentialRampToValueAtTime(0.0001,t+d); o.connect(g).connect(AC.destination); o.start(t); o.stop(t+d);}catch(e){} }
document.addEventListener('pointerdown',()=>{ensureAudio()},{once:true});

/* ====== Matrix Rain ====== */
(function matrix(){
  const c=document.getElementById('matrix'), ctx=c.getContext('2d');
  function size(){ c.width=innerWidth; c.height=innerHeight; cols=Math.floor(c.width/14); drops=Array(cols).fill(1); }
  let cols=0, drops=[];
  const chars='„Ç¢„Ç´„Çµ„Çø„Éä„Éè„Éû„É§„É©„ÉØ0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
  function draw(){
    ctx.fillStyle='rgba(0,0,0,0.08)'; ctx.fillRect(0,0,c.width,c.height);
    ctx.fillStyle='#15ff95'; ctx.font='14px monospace';
    for(let i=0;i<drops.length;i++){
      const text=chars[Math.floor(Math.random()*chars.length)];
      ctx.fillText(text, i*14, drops[i]*16);
      if(drops[i]*16>c.height && Math.random()>0.975){ drops[i]=0; }
      drops[i]++;
    }
    requestAnimationFrame(draw);
  }
  addEventListener('resize', size); size(); draw();
})();

/* ====== Quiz Fluxo ====== */
const answers={}; let step=1; const total=5;
const $=s=>document.querySelector(s);
const slug=t=>(t||'').normalize('NFD').replace(/[^\w\s-]/g,'').trim().replace(/\s+/g,'-').toLowerCase();
function setProgress(){ $('#stepLabel').textContent=`${Math.min(step,total)}/${total}`; $('#bar').style.width=`${Math.round((step-1)/total*100)}%`; }
function show(id){ ['q1','q2','q3','q4','q5'].forEach(i=>$('#'+i).classList.add('hidden')); if(id) $('#'+id).classList.remove('hidden'); }

function iniciarProtocolo(){
  addXP(XP_ON_START); beep(840,0.1);
  document.getElementById('protocolo').classList.add('hidden');
  document.getElementById('quiz').classList.remove('hidden');
  step=1; show('q1'); setProgress();
  try{ fbq('trackCustom','StartProtocol'); }catch(e){}
}

function choose(key,val){
  answers[key]=val; addXP(XP_PER_ANSWER); beep(700,0.09);
  try{ fbq('trackCustom','AnswerQuestion',{id:key,answer:val}); }catch(e){}
  next();
}
function next(){ step++; if(step>total){ $('#quiz').classList.add('hidden'); $('#lead').classList.remove('hidden'); $('#nome').focus(); return; } show('q'+step); setProgress(); }
function prev(){ if(step>1){ step--; show('q'+step); setProgress(); beep(520,0.06); } }
function skip(){ next(); beep(520,0.06); }

function finalizar(){
  beep(900,0.12);
  const url=new URL(DESTINO_CHECKOUT);
  keepParams.forEach(k=>{ if(params.get(k)) url.searchParams.set(k, params.get(k)); });
  const nome=$('#nome').value.trim(), whats=$('#whats').value.trim();
  if(nome) url.searchParams.set('q_nome', slug(nome));
  if(whats) url.searchParams.set('q_whats', slug(whats));
  Object.entries(answers).forEach(([k,v])=> url.searchParams.set('q_'+slug(k), slug(v)));
  url.searchParams.set('xp', XP); url.searchParams.set('lvl', LVL);
  try{ fbq('track','Lead'); fbq('trackCustom','SubmitQuiz',{answers,XP,LVL}); }catch(e){}
  location.href=url.toString();
}

/* ====== Rodap√© ====== */
document.getElementById('year').textContent=new Date().getFullYear();
</script>
</body>
</html>
